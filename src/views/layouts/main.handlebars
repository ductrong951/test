<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIES</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/watch-detail.css">
    <link rel="stylesheet" href="../css/base.css">
    {{!-- <link rel="stylesheet" href="../css/music.css"> --}}
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.7/plyr.css"/>
    <link rel="stylesheet" href="../fontawesome-free-6.0.0-web/css/all.min.css">
    <link rel="stylesheet" href="../FontAwesome.Pro.5.15.4/FontAwesome.Pro.5.15.4.Web/css/all.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="./js/song.js"></script>
    <script src="../js/embla-carousel.js"></script>
    <script src="../js/embla-carousel-autoplay.js"></script>
    <script src="../js/plyr.js"></script>
</head>

<body>
    {{>header}}
    {{{body}}}

    <script type="text/javascript">
    
        let emblaNodes = document.querySelectorAll(".movies-slider");

        emblaNodes.forEach(function (emblaNode, i) {
            let options = { loop: true, slidesToScroll: 1, align: 0, startIndex: 0, speed: 8 };
            var plugins = [EmblaCarouselAutoplay()]
        let embla = EmblaCarousel(emblaNode, options, plugins);

        //nav
        let prevBtn = emblaNode.querySelector(".embla__prev");
        let nextBtn = emblaNode.querySelector(".embla__next");

        // init nav
        let setupPrevNextBtns = (prevBtn, nextBtn, embla) => {
            prevBtn.addEventListener("click", embla.scrollPrev, false);
            nextBtn.addEventListener("click", embla.scrollNext, false);
        };
        setupPrevNextBtns(prevBtn, nextBtn, embla);
    });

        let emblaNodes1 = document.querySelectorAll(".item-toprated");

        emblaNodes1.forEach(function (emblaNode, i) {
            let options = { loop: true, slidesToScroll: 2, align: 0, startIndex: 0, speed: 8 };
            var plugins = [EmblaCarouselAutoplay()]
        let embla = EmblaCarousel(emblaNode, options, plugins);

        //nav
        let prevBtn = emblaNode.querySelector(".embla__prev");
        let nextBtn = emblaNode.querySelector(".embla__next");

        // init nav
        let setupPrevNextBtns = (prevBtn, nextBtn, embla) => {
            prevBtn.addEventListener("click", embla.scrollPrev, false);
            nextBtn.addEventListener("click", embla.scrollNext, false);
        };
        setupPrevNextBtns(prevBtn, nextBtn, embla);
    
});

let emblaNodes2 = document.querySelectorAll(".box-related");

        emblaNodes2.forEach(function (emblaNode, i) {
            let options = { axis:'y', loop: true, slidesToScroll: 1, align:0,startIndex: 0, speed: 10 };
            var plugins = [EmblaCarouselAutoplay()]
        let embla = EmblaCarousel(emblaNode, options, plugins);

        //nav
        let prevBtn = emblaNode.querySelector(".embla__prev");
        let nextBtn = emblaNode.querySelector(".embla__next");

        // init nav
        let setupPrevNextBtns = (prevBtn, nextBtn, embla) => {
            prevBtn.addEventListener("click", embla.scrollPrev, false);
            nextBtn.addEventListener("click", embla.scrollNext, false);
        };
        setupPrevNextBtns(prevBtn, nextBtn, embla);
    });
</script>

    {{!-- Delete hidden form --}}

    <form method="POST" name="form-delete"></form>
    <script>
        var productId;
        var deleteform = document.forms['form-delete']

        $('#delete-product').on('show.bs.modal', function(event){
            var button = $(event.relatedTarget)
            productId = button.data('id')
            console.log(productId)
        })

        var btndeleteproduct = document.getElementById('btn-delete-product')
        btndeleteproduct.onclick = function(){
            deleteform.action = '/movies/' + productId + '?_method=DELETE'
            deleteform.submit();
        }
    </script>

    <script>
        const player = new Plyr('#video-style',{
            speed: { selected: 1, options: [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2] },
            quality: { default: 1080, options: [ 1440, 1080, 720, 480, 360] }
        });
    // Expose player so it can be used from the console
        window.player = player;

    </script>
</body>
</html>